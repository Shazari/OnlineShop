@page "/ProductEdit/{Id:int}"


<div class="btn btn-info span2">ویرایش محصول</div>

<hr />
<div class="row">
    
    <EditForm Model="@Product" OnValidSubmit="@EditProduct" class="was-validated">

        <DataAnnotationsValidator />
        <ValidationSummary />
        <div class="span12">
            <div class="span8">
                <div class="span6">
                    <div class="">
                        <div class="">
                            <label class="" id="validatedInputGroupPrepend">نام محصول</label>
                        </div>
                        <InputText @bind-Value="@Product.Name" type="text" class="form-control"  />
                    </div>

                </div>
                
                <div class="span6">
                    <div class="">
                        <div class="">
                            <label class="" >قیمت</label>
                        </div>
                        <InputNumber @bind-Value="@Product.Price" placeholder="price" type="text" class="form-control" aria-describedby="validatedInputGroupPrepend" required />
                    </div>
                    <div class="invalid-feedback">
                        
                    </div>
                </div>

                <div class="span6">
                    <label for="validationTextarea">توضیحات</label>
                    <InputTextArea @bind-Value="@Product.ShortDescription" class="form-control is-invalid" id="validationTextarea" placeholder="Required example textarea" required></InputTextArea>
                    <div class="invalid-feedback">

                    </div>
                </div>
                <div class="span6">
                    <label for="validationTextarea">متن</label>
                    <InputTextArea @bind-Value="@Product.LongDescription" class="form-control is-invalid" id="validationTextarea" placeholder="Required example textarea" required></InputTextArea>
                    <div class="invalid-feedback">

                    </div>
                </div>




            </div>

            <div class="control-group span4">

             

                <div class="card" style="width: 18rem;">

            <div class="card-header">
                تصویر محصول
            </div>
            <div class="card-body">
                @if (imagePath != null)
                {
                    <img style="margin:8px auto;width:150px;"
                         src=@Product.Image />
                }

                <div class="control-group span12">
                    <input type="file" @ref="inputRefrence" @onchange="async()=>await OpenFileAsync()" />
                    <div class="">
                        <ul>
                            <li>File Name:@fileName</li>
                        </ul>
                        <label class="custom-file-label" for="validatedCustomFile"></label>
                        <div class="">عکس محصول را انتخاب کنید</div>
                        @if (!string.IsNullOrWhiteSpace(message))
                        {
                            <div class="alert alert-success">
                                File has been uploaded
                            </div>
                        }

                    </div>
                </div>

            </div>
        </div>



                <div class="control-group span12">
                    <div class="card">
                        <div class="card-header">
                            انتخاب گروهای محصول
                        </div>
                        <div class="card-body">
                            @{
                                <ul style="list-style: none;">
                                    @foreach (var item in categories)
                                    {
                                        <li style="padding: 5px 10px 0px 0px;">
                                            @if (item.Selected)
                                            {
                                                <input type="checkbox" id="@item.Id" checked="checked" @onchange="@((e) => CheckboxChanged(e, item.Id))" />
                                            }
                                            else
                                            {
                                                <input type="checkbox" id="@item.Id" @onchange="@((e) => CheckboxChanged(e, item.Id))" />
                                            }
                                            @item.Name

                                        </li>
                                    }
                                </ul>
                            }

                        </div>
                    </div>

                </div>




            </div>
        </div>
        <input class="btn btn-primary btn-large span2" type="submit" value="ویرایش" />
    </EditForm>

</div>